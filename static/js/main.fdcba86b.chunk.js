(this.webpackJsonpstocks=this.webpackJsonpstocks||[]).push([[0],{100:function(e,t,a){},101:function(e,t,a){},129:function(e,t){},133:function(e,t,a){},137:function(e,t,a){},152:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(9),o=a.n(r),l=(a(100),a(20)),i=a(18),s=a(10),m=a(23),u=a(24),p=a(39),h=a(26),g=a(28),d=(a(101),a(79)),E=a.n(d),k=a(51),b=(a(71),a(52)),f=a(182),v=a(153),O=a(183),j=a(184),_=a(155),y=(a(133),a(176)),S=a(180),x=a(179),A=a(175),C=a(177),T=a(178),w=a(4),M=a(187),L=a(181),D=Object(w.a)((function(e){return{tooltip:{backgroundColor:"#f5f5f9",color:"rgba(0, 0, 0, 0.87)",maxWidth:220,fontSize:e.typography.pxToRem(12),border:"1px solid #dadde9"}}}))(M.a),z=function(e){Object(g.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).state={size:3},n}return Object(u.a)(a,[{key:"addZero",value:function(e){return e<10&&(e="0"+e),e}},{key:"render",value:function(){var e=this;if(this.props.stock&&this.props.stock.AAPL){console.log(this.props.stock);var t=new Date(this.props.stock.AAPL[this.props.stock.AAPL.length-1].time),a=this.addZero(t.getDate())+"/"+this.addZero(t.getMonth()+1)+" -- "+this.addZero(t.getHours())+":"+this.addZero(t.getMinutes())+":"+this.addZero(t.getSeconds());return c.a.createElement(A.a,{component:v.a},c.a.createElement(y.a,{"aria-label":"simple table"},c.a.createElement(C.a,null,c.a.createElement(T.a,null,c.a.createElement(x.a,null,"Ticker"),c.a.createElement(x.a,{align:"right"},"Time "),c.a.createElement(x.a,{align:"right"},"Value"),c.a.createElement(x.a,{align:"right"},"Volumen Transado"))),c.a.createElement(S.a,null,Object.keys(this.props.stock).map((function(t){return c.a.createElement(D,{title:c.a.createElement(c.a.Fragment,null,c.a.createElement(L.a,{color:"inherit"},"Tooltip with HTML"),c.a.createElement("em",null,"And here's")," ",c.a.createElement("b",null,"some")," ",c.a.createElement("u",null,"amazing content"),"."," ","It's very engaging. Right?")},c.a.createElement(T.a,{key:t},c.a.createElement(x.a,{component:"th",scope:"row"},t),c.a.createElement(x.a,{align:"right"},a),c.a.createElement(x.a,{align:"right"},e.props.stock[t][e.props.stock[t].length-1].value),c.a.createElement(x.a,{align:"right"},e.props.buy_data[t]?e.props.buy_data[t].length>=2?e.props.buy_data[t].map((function(e){return e[1]})).reduce((function(e,t){return e+t}),0):e.props.buy_data[t].map((function(e){return e[1]}))[0]:0+e.props.sell_data[t]?e.props.sell_data[t].length>=2?e.props.sell_data[t].map((function(e){return e[1]})).reduce((function(e,t){return e+t}),0):e.props.sell_data[t].map((function(e){return e[1]}))[0]:0)))})))))}return c.a.createElement(A.a,{component:v.a},c.a.createElement(y.a,{"aria-label":"simple table"},c.a.createElement(C.a,null,c.a.createElement(T.a,null,c.a.createElement(x.a,null,"Ticker"),c.a.createElement(x.a,{align:"right"},"Time "),c.a.createElement(x.a,{align:"right"},"Value")))))}}]),a}(n.Component),P=(a(137),Object(w.a)((function(e){return{tooltip:{backgroundColor:"#f5f5f9",color:"rgba(0, 0, 0, 0.87)",maxWidth:220,fontSize:e.typography.pxToRem(12),border:"1px solid #dadde9"}}}))(M.a)),B=function(e){Object(g.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).state={size:3},n}return Object(u.a)(a,[{key:"render",value:function(){var e=this;return this.props.stock&&this.props.stock.AAPL?(console.log("VAR TABLE",this.props.stock),c.a.createElement(A.a,{component:v.a},c.a.createElement(y.a,{"aria-label":"simple table"},c.a.createElement(C.a,null,c.a.createElement(T.a,null,c.a.createElement(x.a,null,"Ticker"),c.a.createElement(x.a,{align:"right"},"Maximo "),c.a.createElement(x.a,{align:"right"},"Minimo"),c.a.createElement(x.a,{align:"right"},"Ultimo"),c.a.createElement(x.a,{align:"right"},"Variacion"))),c.a.createElement(S.a,null,Object.keys(this.props.stock).map((function(t){return c.a.createElement(P,{title:c.a.createElement(c.a.Fragment,null,c.a.createElement(L.a,{color:"inherit"},"Tooltip with HTML"),c.a.createElement("em",null,"And here's")," ",c.a.createElement("b",null,"some")," ",c.a.createElement("u",null,"amazing content"),"."," ","It's very engaging. Right?")},c.a.createElement(T.a,{key:t},c.a.createElement(x.a,{component:"th",scope:"row"},t),console.log(e.props.stock[t]),c.a.createElement(x.a,{align:"right"},e.props.stock[t]?Math.max.apply(Math,Object(l.a)(e.props.stock[t].map((function(e){return e.value})))):0),c.a.createElement(x.a,{align:"right"},e.props.stock[t]?Math.min.apply(Math,Object(l.a)(e.props.stock[t].map((function(e){return e.value})))):0),c.a.createElement(x.a,{align:"right"},e.props.stock[t]?e.props.stock[t][e.props.stock[t].length-1].value:0),c.a.createElement(x.a,{align:"right"},e.props.stock[t]&&e.props.stock[t].length>=2?((e.props.stock[t][e.props.stock[t].length-1].value-e.props.stock[t][e.props.stock[t].length-2].value)/e.props.stock[t][e.props.stock[t].length-2].value*100).toFixed(3):0,"%")))})))))):c.a.createElement(A.a,{component:v.a},c.a.createElement(y.a,{"aria-label":"simple table"},c.a.createElement(C.a,null,c.a.createElement(T.a,null,c.a.createElement(x.a,null,"Ticker"),c.a.createElement(x.a,{align:"right"},"Time "),c.a.createElement(x.a,{align:"right"},"Value")))))}}]),a}(n.Component),V=(a(138),Object(f.a)((function(e){return{container:{display:"grid",gridTemplateColumns:"repeat(12, 1fr)",gridGap:e.spacing(3)},paper:{padding:e.spacing(1),textAlign:"center",color:e.palette.text.secondary,whiteSpace:"nowrap",marginBottom:e.spacing(1)},divider:{margin:e.spacing(2,0)}}})));function Z(e){var t=e.stock,a=(e.market,e.stocks_info),c=e.buy_data,r=e.sell_data,o=V(),l=n.useState("AAPL"),i=Object(b.a)(l,2),s=i[0],m=i[1],u=n.useState({}),p=Object(b.a)(u,2),h=p[0],g=p[1];return n.useEffect((function(){var e={};if(t&&t[String(s)]&&t[String(s)].length>30){for(var a=t[String(s)].length-30;a<t[String(s)].length;a++){var n=new Date(t[String(s)][a].time),c=n.getMinutes()+"-"+n.getSeconds(),r=String(c),o=t[String(s)][a].value;e[r]=o}g(e)}}),[s,t]),n.createElement("div",null,n.createElement(O.a,{container:!0,spacing:3},n.createElement(O.a,{item:!0,xs:3},n.createElement(z,{stock:t,stocks_info:a,buy_data:c,sell_data:r})),n.createElement(O.a,{item:!0,xs:5},n.createElement(j.a,{color:"primary","aria-label":"outlined primary button group"},Object.keys(t).map((function(e){return n.createElement(_.a,{onClick:function(){return m(e)}},e)}))),n.createElement(k.a,{data:h})),n.createElement(O.a,{item:!0,xs:4},n.createElement(B,{stock:t})),n.createElement(O.a,{item:!0,xs:12},n.createElement("h1",null,"Mercado de transacciones")),n.createElement(O.a,{item:!0,xs:1}),n.createElement(O.a,{item:!0,xs:5}),n.createElement(O.a,{item:!0,xs:5},n.createElement(v.a,{className:o.paper},"xs=8")),n.createElement(O.a,{item:!0,xs:1})))}var H=a(185),N=a(186),R=E()("wss://le-18262636.bitzonte.com",{path:"/stocks"}),I=function(e){Object(g.a)(a,e);var t=Object(h.a)(a);function a(){var e;return Object(m.a)(this,a),(e=t.call(this)).handleClick=e.handleClick.bind(Object(p.a)(e)),e.state={stock:{},stocks_info:{},connection_text:"Desconectar socket",buy_data:{},sell_data:{},exchanges_data:{}},e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=this;console.log("P\xe1gina montada"),console.log("Encendiendo socket"),R.emit("EXCHANGES",(function(e){})),R.on("EXCHANGES",(function(t){e.setState(Object(s.a)({},e.state,{exchanges_data:t}))})),R.emit("STOCKS",(function(e){})),R.on("STOCKS",(function(t){console.log("current",t),t.forEach((function(t){e.setState((function(e){return Object(s.a)({},e,{stocks_info:Object(s.a)({},e.stock_info,Object(i.a)({},t.ticker,t))})}))}))})),R.on("STOCKS",(function(t){e.setState(Object(s.a)({},e.state,{stocks_data:t})),Object.values(t).map((function(t){return e.setState(Object(s.a)({},e.state,{stocks_data2:Object(s.a)({},e.state.stocks_data2,Object(i.a)({},t.company_name,t.ticker))}))}))})),R.on("UPDATE",(function(t){var a={time:t.time,value:t.value};e.setState((function(e){return Object(s.a)({},e,{stock:Object(s.a)({},e.stock,Object(i.a)({},t.ticker,[].concat(Object(l.a)(e.stock[t.ticker]||[]),[a])))})}))})),R.on("BUY",(function(t){var a=e.state.buy_data[t.ticker]?e.state.buy_data[t.ticker]:[];e.setState(Object(s.a)({},e.state,{buy_data:Object(s.a)({},e.state.buy_data,Object(i.a)({},t.ticker,[].concat(Object(l.a)(a),[[new Date(t.time),t.volume]])))}))})),R.on("SELL",(function(t){var a=e.state.sell_data[t.ticker]?e.state.sell_data[t.ticker]:[];e.setState(Object(s.a)({},e.state,{sell_data:Object(s.a)({},e.state.sell_data,Object(i.a)({},t.ticker,[].concat(Object(l.a)(a),[[new Date(t.time),t.volume]])))}))}))}},{key:"handleClick",value:function(){R.connected?(R.close(),console.log(R.connected),this.setState({connection_text:"Conectar socket"})):(R.open(),console.log(R.connected),this.setState({connection_text:"Desconectar socket"}))}},{key:"render",value:function(){return this.state.stock&&this.state.stock.IBM?c.a.createElement("div",{className:"App"},c.a.createElement(H.a,{position:"static"},c.a.createElement(N.a,null,c.a.createElement(L.a,{variant:"h6"},c.a.createElement(_.a,{color:"inherit",position:"right",onClick:this.handleClick},this.state.connection_text)))),c.a.createElement("h1",null," Mercado de acciones "),c.a.createElement(Z,{stock:this.state.stock,market:this.state.market,stocks_info:this.state.stocks_info,buy_data:this.state.buy_data,sell_data:this.state.sell_data})):c.a.createElement("div",{className:"App"},c.a.createElement(H.a,{position:"static"},c.a.createElement(N.a,null,c.a.createElement(L.a,{variant:"h6"},c.a.createElement(_.a,{color:"inherit",position:"right",onClick:this.handleClick},this.state.connection_text)))),c.a.createElement("h1",null," Mercado de acciones "))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(I,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},95:function(e,t,a){e.exports=a(152)}},[[95,1,2]]]);
//# sourceMappingURL=main.fdcba86b.chunk.js.map